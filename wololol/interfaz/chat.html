<!DOCTYPE html>
<html lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no">
        <title>Wololol</title>

        <!-- CSS  -->
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"> 
        <link href="css/materialize.css" type="text/css" rel="stylesheet" media="screen,projection">
        <link href="css/style.css" type="text/css" rel="stylesheet" media="screen,projection">
    </head>
    <body>
        <nav class="blue" role="navigation">
            <div class="nav-wrapper container">

                <a id="logo-container" href="#" class="white-text brand-logo">Wololol</a>               
                <ul class="right hide-on-med-and-down">
                    <div class="tooltipped left input-field" data-position="bottom" data-delay="50" data-tooltip="Ingrese nombre de invocador a buscar">
                        <input id="search" placeholder="Summoner Name" type="search" required>
                        <label for="search"><i class="material-icons">search</i></label>
                        <i class="material-icons">close</i>
                    </div>                      
                    <li class="active waves-effect waves-cyan"><a href="index.html" class="tooltipped" data-position="bottom" data-delay="50" data-tooltip="Información de perfil de un usuario"><i class="white-text material-icons">person_pin</i></a></li>
                    <li class="waves-effect waves-cyan"><a href="curriculum.html" class="tooltipped" data-position="bottom" data-delay="50" data-tooltip="Sección de chat, debe loguearse"><i class="white-text material-icons">chat</i></a></li>
                    <li class="waves-effect waves-cyan"><a href="contacto.html" class="tooltipped" data-position="bottom" data-delay="50" data-tooltip="Información estática del juego"><i class="white-text material-icons">dashboard</i></a></li>
                    <li class="waves-effect waves-cyan"><a href="contacto.html" class="white-text tooltipped" data-position="bottom" data-delay="50" data-tooltip="El 14/10/15, a partir de las 02:30 de Buenos Aires / 02:30 de Santiago, se desactivarán las colas clasificatorias en preparación para la actualización 5.20. A las 04:00 de Buenos Aires / 04:00 de Santiago, se apagarán los servidores y todas las partidas en curso terminarán en empate y no se guardarán datos de las mismas. Estimamos que los campos de batalla no estarán disponibles por 3 horas."><i class="left white-text material-icons">check_box</i>Online</a></li>

                    <li class="waves-effect waves-cyan"><a href="contacto.html" class="tooltipped" data-position="bottom" data-delay="50" data-tooltip="Ingresar al sistema"><i class="white-text material-icons">arrow_forward</i></a></li>

                </ul>


                <ul style="left: -27px;" id="nav-mobile" class="blue side-nav">
                    <li class=""><a href="index.html" class="waves-effect waves-cyan tooltipped" data-position="right" data-delay="50" data-tooltip="Información de perfil de un usuario"><i class="white-text material-icons">person_pin</i></a></li>
                    <li class="active"><a href="curriculum.html" class="waves-effect waves-cyan tooltipped" data-position="right" data-delay="50" data-tooltip="Sección de chat, debe loguearse"><i class="white-text material-icons">chat</i></a></li>
                    <li class=""><a href="contacto.html" class="waves-effect waves-cyan tooltipped" data-position="right" data-delay="50" data-tooltip="Información estática del juego"><i class="white-text material-icons">dashboard</i></a></li>
                    <li class=""><a href="contacto.html" class="waves-effect waves-cyan tooltipped" data-position="right" data-delay="50" data-tooltip="Ingresar al sistema"><i class="white-text material-icons">arrow_forward</i></a></li>
                </ul>
                <a  class="waves-effect waves-cyan circle button-collapse" style="margin:0 0 0 -10%;" href="#" data-activates="nav-mobile"><i class="material-icons">menu</i></a>
            </div>
        </nav>

        <div class="section">
            <div class="container">
                <div class="darkblue row">
                    <div style="display: block;" id="chat" class="darkblue col s12">

                        <div style="overflow-y: scroll;" id="contactos" class="hide-on-med-and-down darkblue text-white col s4">
                            <ul id="contactList" class="collection" data-collapsible="accordion" style="border:0px;">
                                <!-- Perfil -->
                                <!-- Tarjeta -->
                                <li id="perfil" class="collection-item borderBlue" style="border-bottom:0px;">
                                    <img class="mid chatImg" src="img/612.png" width="40px"/>
                                    <span class="white-text nameChat">Sad Jocker King</span>
                                    <i id="estado" class="material-icons right green-text">lens</i>
                                    <a class="modal-trigger right" href="#modal1"><i class="waves-effect waves-light material-icons">info</i></a>
                                </li>
                                <!-- Ficha de Información -->
                                <div id="modal1" class="modal blue borderBlue white-text">
                                    <div class="modal-content">
                                        <span>Nivel: </span><span>30</span><br>
                                        <span>Liga Solo: </span>
                                        <span>Gold</span>
                                        <span>1</span><br>
                                        <span>Liga: </span><span>Sad King's Army</span><br>
                                        <span>Score: </span><span>280</span><br>
                                        <div class="input-field">
                                            <input id="Descripción" type="text">
                                            <label for="Descripción">Descripción</label>
                                        </div>
                                    </div>
                                    <div class="modal-footer blue">
                                        <a href="#!" class="white-text modal-action modal-close waves-effect waves-green btn-flat">OK</a>
                                    </div>
                                </div>
                            </ul>
                        </div>
                        <div id="chatBox" class="col s8">
                            <div id="dlog-default" class="conversacion card blue text-white pad">
                                <h5 class="valign">Selecciona algún contacto para chatear!</h5>
                            </div>
                            <div id="inputChat" class="card lightblue input-field pad">
                                <input id="chatText" class="col s11" type="text" value="">
                                <button id="send" type="submit" class="btn-floating blue btn-flat waves-effect right mid">
                                    <i class="material-icons">send</i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <footer class="page-footer blue">
                <div class="container">
                    <div class="row">
                        <div class="col l6 s12">
                            <h5 class="white-text">Company Bio</h5>
                            <p class="grey-text text-lighten-4">We are a team of college 
                                students working on this project like it's our full time job. Any amount
                                would help support and continue development on this shit project and is 
                                greatly appreciated.</p>


                        </div>
                        <div class="col l3 s12">
                            <h5 class="white-text">Settings</h5>
                            <ul>
                                <li><a class="white-text" href="#%21">Link 1</a></li>
                                <li><a class="white-text" href="#%21">Link 2</a></li>
                                <li><a class="white-text" href="#%21">Link 3</a></li>
                                <li><a class="white-text" href="#%21">Link 4</a></li>
                            </ul>
                        </div>
                        <div class="col l3 s12">
                            <h5 class="white-text">Connect</h5>
                            <ul>
                                <li><a class="white-text" href="#%21">Link 1</a></li>
                                <li><a class="white-text" href="#%21">Link 2</a></li>
                                <li><a class="white-text" href="#%21">Link 3</a></li>
                                <li><a class="white-text" href="#%21">Link 4</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="footer-copyright">
                    <div class="container">
                        Made by WoloTeam<a class="brown-text text-lighten-3" href="http://materializecss.com/">Materialize</a>
                    </div>
                </div>
            </footer>


            <!--  Scripts-->        
            <script type="text/javascript" src="js/jquery-2.1.1.min.js"></script>
            <script type="text/javascript" src="js/materialize.min.js"></script>
            <script src="js/init.js"></script>


            <div class="hiddendiv common"></div><div style="left: 0px;" class="drag-target"></div>

        </div>
    </body>

</html>
<script>
    $(document).ready(function(){
        var userName = "Sad Jocker King";
        agregContact("Ωω.ΆΈ. ΉΊ","img/612.png","42","Silver VI","AguanteTurquia","653","Normal","En Juego","13 horas","ThU HeNbIdIah AzE Mih EghO");
        agregContact("Adriex","img/612.png");
        agregContact("Ovej4","img/612.png");
        $("#contactos").height($(window).height()-100);
        $(".conversacion").height($(window).height()-180);
        if ( $("#contactos").css('display') == 'none' ){
            $("#chat").prepend('<button id="hiddenBtn" type="submit" class="btn-floating blue btn-flat waves-effect right mid"><i class="material-icons">send</i></button>');
            $("#chat").append('<div id="modalContacts" class="likemodal blue borderBlue white-text" style="position:fixed"><div id="contactsHere"></div><div class="blue s12"><hr><a id="closeContacts" class="right white-text waves-effect waves-green btn-flat">OK</a></div></div>');
            $('#modalContacts').hide();
            //$("#contactList").appendTo("contactsHere");
            $("#contactList").detach().appendTo('#contactsHere')
            $("#modalContacts").height($(window).height()-100);
            $("#modalContacts").width($(window).width()-100);

            $("#hiddenBtn").click(function(){
                $('#modalContacts').fadeIn( "slow");
                $('.modal').openmodal();
            });
            $("#closeContacts").click(function(){
                $('#modalContacts').fadeOut( "slow");
            });
            $("#chatBox").removeClass("s8");
            $("#chatBox").addClass("s12");
        }


        function agregContact(name,profileImage,level,league,promo,score,GQT,status,time,statusMsg){
            nameID=nameToID(name);
            $("#contactList").append($('<li/>', {
                html : $('<img class="mid chatImg" src="'+profileImage+'" width="40px"/><span class="white-text nameChat">'+name+'</span><i id="estado" class="material-icons right green-text">lens</i><a id="'+nameID+'"class="waves-effect circle waves-light modal-trigger right" data-target="#m'+nameID+'"><i class="material-icons">info</i></a>'),
                'class' : 'contact collection-item blue borderBlue',
                'style': 'border-bottom:0px;'
            }));
            var profileLarge = '<img src="'+profileImage+'" width="80px" style="border-radius:50px"/><br>';
            var level = '<span class="blue-text">Nivel: </span><span>'+level+'</span><br>';
            var league = '<span>'+league+'</span><br>';
            var promo = '<span>'+promo+'</span><br>';
            var score = '<i class="material-icons mid tiny">grade</i><span>'+score+'</span><br>';
            var GQT = '<span>'+GQT+'</span><br>';
            var status = '<span class="yellow-text">'+status+'</span><br>';
            var time = '<span>'+time+'</span><br>';
            var statusMsg = '<span class="yellow-text" style="font-style:italic;font-size:20px">"'+statusMsg+'"</span><br>';

            $("#contactList").append('<div id="m'+nameID+'" class="modal blue borderBlue white-text"><div class="modal-content"><h4 class="col s12">'+name+'</h4><div class="card lightblue col s12 m12 l3 center" style="padding:10px">'+profileLarge+league+promo+'</div><div class="col l9 s12 m12">'+level+score+GQT+status+time+statusMsg+'</div></div><div class="blue modal-footer"><hr><a class=" modal-action modal-close white-text waves-effect waves-green btn-flat">OK</a></div></div>');
        }
        $("#estado").click(function(){
            var src = $('#estado').attr('class');
            console.log(src);
            if (src=="material-icons right green-text"){
                $('#estado').removeClass( "green-text" );
                $('#estado').addClass( "red-text" );
            }else{
                $('#estado').removeClass( "red-text" );
                $('#estado').addClass( "green-text" );
            }
        });


        $(".contact").click(function(){
            tabID=$(this).find("span").text();
            tabID=nameToID(tabID);
            $(".contact").removeClass("lightblue");
            $(".contact").removeClass("contActive");
            $(this).addClass("lightblue");
            $(this).addClass("contActive");
            $(".conversacion").hide();
            if ( $( "#dlog-"+tabID ).length ) {
                $("#dlog-"+tabID).show();
                $('#modalContacts').fadeOut( "slow");
            }else{
                $("#chatBox").prepend('<div id="dlog-'+tabID+'" class="conversacion card blue text-white pad"></div>');
            }
            clsInputChat();
            $(".conversacion").height($(window).height()-180);
        });

        function incomeMsg(from,msgFrom){
            from=nameToID(from);
            $("#dlog-"+from).append('<div class="section"><span class="nameChat">'+from+'</span><br><p class="messageChat">'+msgFrom+'</p></div><hr>');
        }

        function clsInputChat(){
            $("#chatText").val("");
        }

        $('.modal-trigger').click(function(){
            name=$(this).attr('id');
            $('#m'+name).openModal();
        });

        function nameToID(name){
            var nameOutSpa = name.replace(/ /g,"-");
            var nameID = nameOutSpa.replace(/\./g,"-");
            return nameID;
        }


        $("#send").click(function (){
            var msg = $("#chatText").val();
            clsInputChat();
            if ($(".contact").hasClass("contActive")){
                if (msg==""){
                    alert("Debes escribir algo")
                }else{
                    msgTo=$(".contActive").find("span").text();
                    msgTo=nameToID(msgTo);
                    $("#dlog-"+msgTo).append('<div class="section"><span class="nameChat">'+userName+'</span><br><p class="messageChat">'+msg+'</p></div><hr>');
                }
            }else{
                alert("Selecciona un contacto")
            }
        });
    });
</script>

});
